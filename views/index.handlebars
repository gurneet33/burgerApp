<h1>Eat-da-Burger</h1>
<ul>
    {{#each burgers}}
    <li>
        {{!-- <p>ID:{{this.id}}</p> --}}
        <p> {{this.id}}. {{this.burger_name}}</p>

        {{!-- <a href="api/burgers/{{this.id}}"> --}}
        <button data-burgerid="{{this.id}}" type="button" class="delete" name='delete'>X</button>
        devour it

    </li>
    {{/each}}
</ul>

<form action="/" method="POST" id="createburger" class="button-size">

    <textarea type="text" name="burg"></textarea>
    <button type="submit">Submit</button>


</form>

<script>
    $(".delete").on("click", function (event) {
        // Get the ID from the button.
        // This is shorthand for $(this).attr("data-planid")
        var id = $(this).data("burgerid");

        // Send the DELETE request.
        $.ajax("/burgers/" + id, {
            type: "DELETE"
        }).then(
            function () {
                console.log("deleted id ", id);
                // Reload the page to get the updated list
                location.reload();
            }
        );
    });

    $("#createburger").on("submit", function (event) {
        // Make sure to preventDefault on a submit event.
        event.preventDefault();

        // [name=burg] will find an element with a "name" attribute equal to the string "burg"
        var newBurger = {
            burger: $("#createburger [name=burg]").val().trim()
        };

        // Send the POST request.
        $.ajax("/burgers", {
            type: "POST",
            data: newBurger
        }).then(
            function () {
                console.log("created new burger" + newBurger);
                // Reload the page to get the updated list
                location.reload();
            }
        );
    });
</script>

{{!-- <script>
    $(".delete").on("click", function () {
        var id = $(this).data("burgerid");

        // sending a delete request

        $.ajax("/newburger" + id, {
            type: "DELETE"
        }).then(function () {
            console.log("deleted id:", id)
        })
    });

   
    })
</script> --}}